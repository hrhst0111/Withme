<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<head>
</head>
<body>
    <a href="javascript:kakaoLogin();"><img src="kakao.png"></a>
    <a href="https://kauth.kakao.com/oauth/logout?client_id={975e17a610335f51a7dad38433cae228}&logout_redirect_uri={https://hrhst0111.github.io/web1/index.html}">
    로그아웃</a>
    <script language="javascript">
    Kakao.Auth.authorize({
    redirectUri: '{https://hrhst0111.github.io/web1/index_logout.html}'
}); //인가코드까지 받음. 이제 토큰 받을 코드 써보자
  
 curl -v -X GET "https://kauth.kakao.com/oauth/logout?client_id={975e17a610335f51a7dad38433cae228}&logout_redirect_uri={https://hrhst0111.github.io/web1/index.html}"

POST /oauth/token HTTP/1.1
Host: kauth.kakao.com
Content-type: application/x-www-form-urlencoded;charset=utf-8
curl -v -X POST "https://kauth.kakao.com/oauth/token" \
 -H "Content-Type: application/x-www-form-urlencoded" \
 -d "grant_type=authorizaton_code" \
 -d "client_id={"975e17a610335f51a7dad38433cae228"}" \
 --data-urlencode "redirect_uri={https://hrhst0111.github.io/web1/index_logout.html}" \
 -d "code={AUTHORIZE_CODE}" //토큰 받기 완료

 Kakao.Auth.setAccessToken(ACCESS_TOKEN); //토큰할당
        
 if (!Kakao.Auth.getAccessToken()) {
    console.log('Not logged in.');
    return;
  }
  Kakao.Auth.logout(function() {
    console.log(Kakao.Auth.getAccessToken());
  }); //토큰 만료 시키는 코드. 서비스 로그아웃은 직접 구현해야됨. 뭔소리야

  Kakao.API.request({
    url: '/v1/user/unlink',
    success: function(response) {
      console.log(response);
    },
    fail: function(error) {
      console.log(error);
    },
  }); //연결 끊기 기능

  Kakao.API.request({
    url: '/v2/user/me'
    data: {
        property_keys: ["kakao_account.profile_nickname", "kakao_account.email","kakao_account.gender"]
    },
    success: function(response) {
        console.log(response);
    },
    fail: function(error) {
        console.log(error);
    }
}); //사용자 정보 가져오기. 프로필 이름, 카카오계정 이메일, 성별 요청. 뒤 2개는 선택 동의 항목

Kakao.API.request({
    url: '/v1/user/update_profile'
}); //사용자 정보 저장하기. 이거 맞냐??

Kakao.Auth.authorize({
    redirectUri: '{https://hrhst0111.github.io/web1/index_logout.html}',
    scope: 'age_range,friends'
}); //로그인 화면에서 추가 항목 동의 요청. 이용 중 동의 항목인 연령대, 친구목록 선택

Kakao.API.request({
    url: '/v2/user/scopes',
    data: {
        scopes: ["account_email","gender","age_range", "friends"]
    },
    success: function(response) {
        console.log(response);
    },
    fail: function(error) {
        console.log(error);
    }
}); //사용자가 scopes 항목에 동의했는지 확인하기

Kakao.Auth.createLoginButton({
  container: '#CONTAINER_ID',
  success: function(response) {
    console.log(response);
  },
  fail: function(error) {
    console.log(error);
  },
}); //팝업화면으로 로그인 시키기
  </script>
    <script src="https://developers.kakao.com/sdk/js/kakao.js"></script>
    <script>
 window.Kakao.init("ceb53c513c104e8eeca980ffdbfc66be");

</script>
    
    
    </body>
    </html>
